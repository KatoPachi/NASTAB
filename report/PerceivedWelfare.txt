
<<dd_include: report/header.txt>>

# 主観的福祉水準と寄付行動の関係

NaSTaBデータより「現在の税金に対して福祉水準はどの程度か」という質問の回答を主観的な福祉水準として定義して、
主観的な福祉水準（`welfare_level`）、寄付価格（`log_price`）と寄付行動（`log_total_g`）の関係を分析する。
以下のコードはデータセットの呼び出し、変数の定義とパネルデータ化した。

~~~~
<<dd_do: noout>>
cd "C:\Users\vge00\Desktop\nastab"  //root path

* call data
use "data\shaped.dta", clear

* variables
gen price = .
replace price = 1 - mtr if year < 2014
replace price = 1 - 0.15 if year >= 2014

gen log_price = ln(price)
gen log_total_g = ln(i_total_giving + 1)
gen log_pinc_all = ln(lincome + 100000)

gen welfare_level_3scale = .
replace welfare_level_3scale = 1 if welfare_level < 3
replace welfare_level_3scale = 2 if welfare_level == 3
replace welfare_level_3scale = 3 if welfare_level > 3
replace welfare_level_3scale = . if welfare_level == .

* panel data
xtset pid
<</dd_do>>
~~~~

主観的福祉水準は5段階で回答する（1:低い～5:高い）。
これをそのまま使用した分析と3段階にまとめたもの（`welfare_level_3scale`）で分析した。
3段階にまとめた福祉水準は以下のように定義した。

- `welfare_level_3scale = 1` (Low): 質問に1もしくは2と回答した人
- `welfare_level_3scale = 2` (Newutral): 質問に3と回答した人
- `welfare_level_3scale = 3` (High): 質問に4もしくは5と回答した人

以下は二つの主観的な福祉水準の記述統計である。

~~~~
<<dd_do>>
table year welfare_level
table year welfare_level_3scale
<</dd_do>>
~~~~

## 5段階の主観的福祉水準

### 主観的福祉水準と寄付行動の相関

Extensive + Intenstive、Extensive、Intensiveに分けて分析した結果である。
各カラムのラベルは以下の要素をコントロールしていることを意味している

- `twoFE`: Two-way fixed effect model
- `Add_Age`: Two-way fixed effect model + 年齢
- `Add_EducT`: Two-way fixed effect model + 年齢 + 教育年数・時間ペアのダミー
- `Add_GenderT`: Two-way fixed effect model + 年齢 + 教育年数・時間ペアのダミー + 性別・時間ペアのダミー
- `Add_LivingT`: Two-way fixed effect model + 年齢 + 教育年数・時間ペアのダミー + 性別・時間ペアのダミー + 居住地・時間ペアのダミー

~~~~
<<dd_do: noout>>
* baseline: individual FE and time FE
xtreg log_total_g i.welfare_level log_price log_pinc_all i.year ///
	if year >= 2012, ///
	fe vce(cluster pid)
estimates store twoFE

* robustness 1: + age
xtreg log_total_g i.welfare_level log_price log_pinc_all age i.year ///
	if year >= 2012, ///
	fe vce(cluster pid)
estimates store Add_Age
	
* robustness 2: + education-time FE
xtreg log_total_g i.welfare_level log_price log_pinc_all age i.year##i.educ ///
	if year >= 2012, ///
	fe vce(cluster pid)
estimates store Add_EducT
	
* robustness 3: + gender-time FE	
xtreg log_total_g i.welfare_level log_price log_pinc_all age i.year##i.gender i.year##i.educ ///
	if year >= 2012, ///
	fe vce(cluster pid)
estimates store Add_GenderT
	
* robustness 4: + living-time FE	
xtreg log_total_g i.welfare_level log_price log_pinc_all age i.year##i.gender i.year##i.educ i.year##i.living_area ///
	if year >= 2012, ///
	fe vce(cluster pid)
estimates store Add_LivingT
<</dd_do>>
~~~~

~~~~
<<dd_do: nocom>>
estimates table twoFE Add_Age Add_EducT Add_GenderT Add_LivingT, ///
	keep(i.welfare_level log_price log_pinc_all) ///
	b(%9.3f) se(%9.3f) p(%9.3f) stats(N r2) ///
	title("Intensive + Extensive Margin")  ///
	modelwidth(12) varwidth(15)
estimates clear
<</dd_do>>
~~~~

~~~~
<<dd_do: noout>>
/*
Extensive Margin during year >=2012
*/

* baseline: individual FE and time FE
xtreg i_ext_giving i.welfare_level log_price log_pinc_all i.year ///
	if year >= 2012, ///
	fe vce(cluster pid)
estimates store twoFE

* robustness 1: + age
xtreg i_ext_giving i.welfare_level log_price log_pinc_all age i.year ///
	if year >= 2012, ///
	fe vce(cluster pid)
estimates store Add_Age
	
* robustness 2: + education-time FE
xtreg i_ext_giving i.welfare_level log_price log_pinc_all age i.year##i.educ ///
	if year >= 2012, ///
	fe vce(cluster pid)
estimates store Add_EducT
	
* robustness 3: + gender-time FE	
xtreg i_ext_giving i.welfare_level log_price log_pinc_all age i.year##i.gender i.year##i.educ ///
	if year >= 2012, ///
	fe vce(cluster pid)
estimates store Add_GenderT
	
* robustness 4: + living-time FE	
xtreg i_ext_giving i.welfare_level log_price log_pinc_all age i.year##i.gender i.year##i.educ i.year##i.living_area ///
	if year >= 2012, ///
	fe vce(cluster pid)
estimates store Add_LivingT
<</dd_do>>
~~~~

~~~~
<<dd_do: nocom>>
estimates table twoFE Add_Age Add_EducT Add_GenderT Add_LivingT, ///
	keep(i.welfare_level log_price log_pinc_all) ///
	b(%9.3f) se(%9.3f) p(%9.3f) stats(N r2) ///
	title("Extensive Margin")  ///
	modelwidth(12) varwidth(15)
estimates clear
<</dd_do>>
~~~~

~~~~
<<dd_do: noout>>
/*
Intensive Margin during year >=2012
*/

* baseline: individual FE and time FE
xtreg log_total_g i.welfare_level log_price log_pinc_all i.year ///
	if year >= 2012 & i_ext_giving == 1, ///
	fe vce(cluster pid)
estimates store twoFE

* robustness 1: + age
xtreg log_total_g i.welfare_level log_price log_pinc_all age i.year ///
	if year >= 2012 & i_ext_giving == 1, ///
	fe vce(cluster pid)
estimates store Add_Age
	
* robustness 2: + education-time FE
xtreg log_total_g i.welfare_level log_price log_pinc_all age i.year##i.educ ///
	if year >= 2012 & i_ext_giving == 1, ///
	fe vce(cluster pid)
estimates store Add_EducT
	
* robustness 3: + gender-time FE	
xtreg log_total_g i.welfare_level log_price log_pinc_all age i.year##i.gender i.year##i.educ ///
	if year >= 2012 & i_ext_giving == 1, ///
	fe vce(cluster pid)
estimates store Add_GenderT
	
* robustness 4: + living-time FE	
xtreg log_total_g i.welfare_level log_price log_pinc_all age i.year##i.gender i.year##i.educ i.year##i.living_area ///
	if year >= 2012 & i_ext_giving == 1, ///
	fe vce(cluster pid)
estimates store Add_LivingT
<</dd_do>>
~~~~

~~~~
<<dd_do: nocom>>
estimates table twoFE Add_Age Add_EducT Add_GenderT Add_LivingT, ///
	keep(i.welfare_level log_price log_pinc_all) ///
	b(%9.3f) se(%9.3f) p(%9.3f) stats(N r2) ///
	title("Intensive Margin")  ///
	modelwidth(12) varwidth(15)
estimates clear
<</dd_do>>
~~~~


### 主観的福祉水準に関する寄付価格の異質性（サブサンプル分析）

各福祉水準のグループに分けて寄付価格の弾力性を推定する。
先ほどと同様に、Extensive + Intensive、Extensive、Intensiveの三つに分けて分析する。
各カラムのラベルの意味は以下の通り

- `Lowest`: 現在の税金に対して提供される福祉水準は**かなり低い**と回答した人
- `Lower`: 現在の税金に対して提供される福祉水準は**低い**と回答した人
- `Neutral`: 現在の税金に対して提供される福祉水準は**普通**と回答した人
- `Higher`: 現在の税金に対して提供される福祉水準は**高い**と回答した人
- `Highest`: 現在の税金に対して提供される福祉水準は**かなり高い**と回答した人

~~~~
<<dd_do: noout>>
xtreg log_total_g log_price log_pinc_all i.year ///
	if year >= 2012 & welfare_level == 1, ///
	fe vce(cluster pid)
estimates store Lowest

xtreg log_total_g log_price log_pinc_all i.year ///
	if year >= 2012 & welfare_level == 2, ///
	fe vce(cluster pid)
estimates store Lower

xtreg log_total_g log_price log_pinc_all i.year ///
	if year >= 2012 & welfare_level == 3, ///
	fe vce(cluster pid)
estimates store Neutral

xtreg log_total_g log_price log_pinc_all i.year ///
	if year >= 2012 & welfare_level == 4, ///
	fe vce(cluster pid)
estimates store Higher

xtreg log_total_g log_price log_pinc_all i.year ///
	if year >= 2012 & welfare_level == 5, ///
	fe vce(cluster pid)
estimates store Highest
<</dd_do>>
~~~~

~~~~
<<dd_do: nocom>>
estimates table Lowest Lower Neutral Higher Highest, ///
	keep(log_price log_pinc_all) ///
	b(%9.3f) se(%9.3f) p(%9.3f) stats(N r2) ///
	title("Intensive + Extensive Margin Grouped by Perceived Welfare Level")  ///
	modelwidth(12) varwidth(15)
estimates clear
<</dd_do>>
~~~~

~~~~
<<dd_do: noout>>
xtreg i_ext_giving log_price log_pinc_all i.year ///
	if year >= 2012 & welfare_level == 1, ///
	fe vce(cluster pid)
estimates store Lowest

xtreg i_ext_giving log_price log_pinc_all i.year ///
	if year >= 2012 & welfare_level == 2, ///
	fe vce(cluster pid)
estimates store Lower

xtreg i_ext_giving log_price log_pinc_all i.year ///
	if year >= 2012 & welfare_level == 3, ///
	fe vce(cluster pid)
estimates store Neutral

xtreg i_ext_giving log_price log_pinc_all i.year ///
	if year >= 2012 & welfare_level == 4, ///
	fe vce(cluster pid)
estimates store Higher

xtreg i_ext_giving log_price log_pinc_all i.year ///
	if year >= 2012 & welfare_level == 5, ///
	fe vce(cluster pid)
estimates store Highest
<</dd_do>>
~~~~

~~~~
<<dd_do: nocom>>
estimates table Lowest Lower Neutral Higher Highest, ///
	keep(log_price log_pinc_all) ///
	b(%9.3f) se(%9.3f) p(%9.3f) stats(N r2) ///
	title("Extensive Margin Grouped by Perceived Welfare Level")  ///
	modelwidth(12) varwidth(15)
estimates clear
<</dd_do>>
~~~~

~~~~
<<dd_do:noout>>
xtreg log_total_g log_price log_pinc_all i.year ///
	if year >= 2012 & welfare_level == 1 & i_ext_giving == 1, ///
	fe vce(cluster pid)
estimates store Lowest

xtreg log_total_g log_price log_pinc_all i.year ///
	if year >= 2012 & welfare_level == 2 & i_ext_giving == 1, ///
	fe vce(cluster pid)
estimates store Lower

xtreg log_total_g log_price log_pinc_all i.year ///
	if year >= 2012 & welfare_level == 3 & i_ext_giving == 1, ///
	fe vce(cluster pid)
estimates store Neutral

xtreg log_total_g log_price log_pinc_all i.year ///
	if year >= 2012 & welfare_level == 4 & i_ext_giving == 1, ///
	fe vce(cluster pid)
estimates store Higher

xtreg log_total_g log_price log_pinc_all i.year ///
	if year >= 2012 & welfare_level == 5 & i_ext_giving == 1, ///
	fe vce(cluster pid)
estimates store Highest
<</dd_do>>
~~~~

~~~~
<<dd_do: nocom>>
estimates table Lowest Lower Neutral Higher Highest, ///
	keep(log_price log_pinc_all) ///
	b(%9.3f) se(%9.3f) p(%9.3f) stats(N r2) ///
	title("Intensive Margin Grouped by Perceived Welfare Level")  ///
	modelwidth(12) varwidth(15)
estimates clear
<</dd_do>>
~~~~

### 主観的福祉水準に関する寄付価格の異質性（交差項モデル）

価格弾力性が福祉水準によって異なっているので、
これが有意な差かどうかを交差項モデルにて確認した。
各カラムのラベルは以下の要素をコントロールしていることを意味している

- `twoFE`: Two-way fixed effect model
- `Add_Age`: Two-way fixed effect model + 年齢
- `Add_EducT`: Two-way fixed effect model + 年齢 + 教育年数・時間ペアのダミー
- `Add_GenderT`: Two-way fixed effect model + 年齢 + 教育年数・時間ペアのダミー + 性別・時間ペアのダミー
- `Add_LivingT`: Two-way fixed effect model + 年齢 + 教育年数・時間ペアのダミー + 性別・時間ペアのダミー + 居住地・時間ペアのダミー

~~~~
<<dd_do: noout>>
xtreg log_total_g i.welfare_level##c.log_price log_pinc_all i.year ///
	if year >= 2012, ///
	fe vce(cluster pid)
estimates store twoFE

xtreg log_total_g i.welfare_level##c.log_price log_pinc_all age i.year ///
	if year >= 2012, ///
	fe vce(cluster pid)
estimates store Add_Age
	
xtreg log_total_g i.welfare_level##c.log_price log_pinc_all age i.year##i.educ ///
	if year >= 2012, ///
	fe vce(cluster pid)
estimates store Add_EducT
	
xtreg log_total_g i.welfare_level##c.log_price log_pinc_all age i.year##i.gender i.year##i.educ ///
	if year >= 2012, ///
	fe vce(cluster pid)
estimates store Add_GenderT
	
xtreg log_total_g i.welfare_level##c.log_price log_pinc_all age i.year##i.gender i.year##i.educ i.year##i.living_area ///
	if year >= 2012, ///
	fe vce(cluster pid)
estimates store Add_LivingT
<</dd_do>>
~~~~

~~~~
<<dd_do: nocom>>
estimates table twoFE Add_Age Add_EducT Add_GenderT Add_LivingT, ///
	keep(log_price welfare_level#c.log_price log_pinc_all) ///
	b(%9.3f) se(%9.3f) p(%9.3f) stats(N r2) ///
	title("Heterogenous Effect of Logged Price: Intensive + Extensive Margin")  ///
	modelwidth(12) varwidth(15)
estimates clear
<</dd_do>>
~~~~

~~~~
<<dd_do: noout>>
xtreg i_ext_giving i.welfare_level##c.log_price log_pinc_all i.year ///
	if year >= 2012, ///
	fe vce(cluster pid)
estimates store twoFE

xtreg i_ext_giving i.welfare_level##c.log_price log_pinc_all age i.year ///
	if year >= 2012, ///
	fe vce(cluster pid)
estimates store Add_Age
	
xtreg i_ext_giving i.welfare_level##c.log_price log_pinc_all age i.year##i.educ ///
	if year >= 2012, ///
	fe vce(cluster pid)
estimates store Add_EducT
	
xtreg i_ext_giving i.welfare_level##c.log_price log_pinc_all age i.year##i.gender i.year##i.educ ///
	if year >= 2012, ///
	fe vce(cluster pid)
estimates store Add_GenderT
	
xtreg i_ext_giving i.welfare_level##c.log_price log_pinc_all age i.year##i.gender i.year##i.educ i.year##i.living_area ///
	if year >= 2012, ///
	fe vce(cluster pid)
estimates store Add_LivingT
<</dd_do>>
~~~~

~~~~
<<dd_do: nocom>>
estimates table twoFE Add_Age Add_EducT Add_GenderT Add_LivingT, ///
	keep(log_price welfare_level#c.log_price log_pinc_all) ///
	b(%9.3f) se(%9.3f) p(%9.3f) stats(N r2) ///
	title("Heterogenous Effect of Logged Price: Extensive Margin")  ///
	modelwidth(12) varwidth(15)
estimates clear
<</dd_do>>
~~~~

~~~~
<<dd_do: noout>>
xtreg log_total_g i.welfare_level##c.log_price log_pinc_all i.year ///
	if year >= 2012 & i_ext_giving == 1, ///
	fe vce(cluster pid)
estimates store twoFE

xtreg log_total_g i.welfare_level##c.log_price log_pinc_all age i.year ///
	if year >= 2012 & i_ext_giving == 1, ///
	fe vce(cluster pid)
estimates store Add_Age
	
xtreg log_total_g i.welfare_level##c.log_price log_pinc_all age i.year##i.educ ///
	if year >= 2012 & i_ext_giving == 1, ///
	fe vce(cluster pid)
estimates store Add_EducT
	
xtreg log_total_g i.welfare_level##c.log_price log_pinc_all age i.year##i.gender i.year##i.educ ///
	if year >= 2012 & i_ext_giving == 1, ///
	fe vce(cluster pid)
estimates store Add_GenderT
	
xtreg log_total_g i.welfare_level##c.log_price log_pinc_all age i.year##i.gender i.year##i.educ i.year##i.living_area ///
	if year >= 2012 & i_ext_giving == 1, ///
	fe vce(cluster pid)
estimates store Add_LivingT
<</dd_do>>
~~~~

~~~~
<<dd_do: nocom>>
estimates table twoFE Add_Age Add_EducT Add_GenderT Add_LivingT, ///
	keep(log_price welfare_level#c.log_price log_pinc_all) ///
	b(%9.3f) se(%9.3f) p(%9.3f) stats(N r2) ///
	title("Heterogenous Effect of Logged Price: Intensive Margin")  ///
	modelwidth(12) varwidth(15)
estimates clear
<</dd_do>>
~~~~

## 3段階の主観的福祉水準

### 主観的福祉水準と寄付行動の相関

Extensive + Intenstive、Extensive、Intensiveに分けて分析した結果である。
各カラムのラベルは以下の要素をコントロールしていることを意味している

- `twoFE`: Two-way fixed effect model
- `Add_Age`: Two-way fixed effect model + 年齢
- `Add_EducT`: Two-way fixed effect model + 年齢 + 教育年数・時間ペアのダミー
- `Add_GenderT`: Two-way fixed effect model + 年齢 + 教育年数・時間ペアのダミー + 性別・時間ペアのダミー
- `Add_LivingT`: Two-way fixed effect model + 年齢 + 教育年数・時間ペアのダミー + 性別・時間ペアのダミー + 居住地・時間ペアのダミー

~~~~
<<dd_do: noout>>
/*
Total effect during year >=2012
*/

* baseline: individual FE and time FE
xtreg log_total_g i.welfare_level_3scale log_price log_pinc_all i.year ///
	if year >= 2012, ///
	fe vce(cluster pid)
estimates store twoFE

* robustness 1: + age
xtreg log_total_g i.welfare_level_3scale log_price log_pinc_all age i.year ///
	if year >= 2012, ///
	fe vce(cluster pid)
estimates store Add_Age
	
* robustness 2: + education-time FE
xtreg log_total_g i.welfare_level_3scale log_price log_pinc_all age i.year##i.educ ///
	if year >= 2012, ///
	fe vce(cluster pid)
estimates store Add_EducT
	
* robustness 3: + gender-time FE	
xtreg log_total_g i.welfare_level_3scale log_price log_pinc_all age i.year##i.gender i.year##i.educ ///
	if year >= 2012, ///
	fe vce(cluster pid)
estimates store Add_GenderT
	
* robustness 4: + living-time FE	
xtreg log_total_g i.welfare_level_3scale log_price log_pinc_all age i.year##i.gender i.year##i.educ i.year##i.living_area ///
	if year >= 2012, ///
	fe vce(cluster pid)
estimates store Add_LivingT
<</dd_do>>
~~~~

~~~~
<<dd_do: nocom>>
estimates table twoFE Add_Age Add_EducT Add_GenderT Add_LivingT, ///
	keep(i.welfare_level log_price log_pinc_all) ///
	b(%9.3f) se(%9.3f) p(%9.3f) stats(N r2) ///
	title("Intensive + Extensive Margin")  ///
	modelwidth(12) varwidth(15)
estimates clear
<</dd_do>>
~~~~

~~~~
<<dd_do: noout>>
/*
Extensive Margin during year >=2012
*/

* baseline: individual FE and time FE
xtreg i_ext_giving i.welfare_level_3scale log_price log_pinc_all i.year ///
	if year >= 2012, ///
	fe vce(cluster pid)
estimates store twoFE

* robustness 1: + age
xtreg i_ext_giving i.welfare_level_3scale log_price log_pinc_all age i.year ///
	if year >= 2012, ///
	fe vce(cluster pid)
estimates store Add_Age
	
* robustness 2: + education-time FE
xtreg i_ext_giving i.welfare_level_3scale log_price log_pinc_all age i.year##i.educ ///
	if year >= 2012, ///
	fe vce(cluster pid)
estimates store Add_EducT
	
* robustness 3: + gender-time FE	
xtreg i_ext_giving i.welfare_level_3scale log_price log_pinc_all age i.year##i.gender i.year##i.educ ///
	if year >= 2012, ///
	fe vce(cluster pid)
estimates store Add_GenderT
	
* robustness 4: + living-time FE	
xtreg i_ext_giving i.welfare_level_3scale log_price log_pinc_all age i.year##i.gender i.year##i.educ i.year##i.living_area ///
	if year >= 2012, ///
	fe vce(cluster pid)
estimates store Add_LivingT
<</dd_do>>
~~~~

~~~~
<<dd_do: nocom>>
estimates table twoFE Add_Age Add_EducT Add_GenderT Add_LivingT, ///
	keep(i.welfare_level log_price log_pinc_all) ///
	b(%9.3f) se(%9.3f) p(%9.3f) stats(N r2) ///
	title("Extensive Margin")  ///
	modelwidth(12) varwidth(15)
estimates clear
<</dd_do>>
~~~~

~~~~
<<dd_do: noout>>
/*
Intensive Margin during year >=2012
*/

* baseline: individual FE and time FE
xtreg log_total_g i.welfare_level_3scale log_price log_pinc_all i.year ///
	if year >= 2012 & i_ext_giving == 1, ///
	fe vce(cluster pid)
estimates store twoFE

* robustness 1: + age
xtreg log_total_g i.welfare_level_3scale log_price log_pinc_all age i.year ///
	if year >= 2012 & i_ext_giving == 1, ///
	fe vce(cluster pid)
estimates store Add_Age
	
* robustness 2: + education-time FE
xtreg log_total_g i.welfare_level_3scale log_price log_pinc_all age i.year##i.educ ///
	if year >= 2012 & i_ext_giving == 1, ///
	fe vce(cluster pid)
estimates store Add_EducT
	
* robustness 3: + gender-time FE	
xtreg log_total_g i.welfare_level_3scale log_price log_pinc_all age i.year##i.gender i.year##i.educ ///
	if year >= 2012 & i_ext_giving == 1, ///
	fe vce(cluster pid)
estimates store Add_GenderT
	
* robustness 4: + living-time FE	
xtreg log_total_g i.welfare_level_3scale log_price log_pinc_all age i.year##i.gender i.year##i.educ i.year##i.living_area ///
	if year >= 2012 & i_ext_giving == 1, ///
	fe vce(cluster pid)
estimates store Add_LivingT
<</dd_do>>
~~~~

~~~~
<<dd_do: nocom>>
estimates table twoFE Add_Age Add_EducT Add_GenderT Add_LivingT, ///
	keep(i.welfare_level log_price log_pinc_all) ///
	b(%9.3f) se(%9.3f) p(%9.3f) stats(N r2) ///
	title("Intensive Margin")  ///
	modelwidth(12) varwidth(15)
estimates clear
<</dd_do>>
~~~~

### 主観的福祉水準に関する寄付価格の異質性（サブサンプル分析）

各福祉水準のグループに分けて寄付価格の弾力性を推定する。
先ほどと同様に、Extensive + Intensive、Extensive、Intensiveの三つに分けて分析する。
各カラムのラベルの意味は以下の通り

- `Low`: 現在の税金に対して提供される福祉水準は**低い**もしくは**かなり低い**と回答した人
- `Neutral`: 現在の税金に対して提供される福祉水準は**普通**と回答した人
- `High`: 現在の税金に対して提供される福祉水準は**高い**もしくは**かなり高い**と回答した人

~~~~
<<dd_do: noout>>
* Intensive + Extensive margin
xtreg log_total_g log_price log_pinc_all i.year ///
	if year >= 2012 & welfare_level_3scale == 1, ///
	fe vce(cluster pid)
estimates store Low

xtreg log_total_g log_price log_pinc_all i.year ///
	if year >= 2012 & welfare_level_3scale == 2, ///
	fe vce(cluster pid)
estimates store Neutral

xtreg log_total_g log_price log_pinc_all i.year ///
	if year >= 2012 & welfare_level_3scale == 3, ///
	fe vce(cluster pid)
estimates store High
<</dd_do>>
~~~~

~~~~
<<dd_do: nocom>>
estimates table Low Neutral High, ///
	keep(log_price log_pinc_all) ///
	b(%9.3f) se(%9.3f) p(%9.3f) stats(N r2) ///
	title("Intensive + Extensive Margin Grouped by Perceived Welfare Level")  ///
	modelwidth(12) varwidth(15)
estimates clear
<</dd_do>>
~~~~

~~~~
<<dd_do: noout>>
* Extensive Margin
xtreg i_ext_giving log_price log_pinc_all i.year ///
	if year >= 2012 & welfare_level_3scale == 1, ///
	fe vce(cluster pid)
estimates store Low

xtreg i_ext_giving log_price log_pinc_all i.year ///
	if year >= 2012 & welfare_level_3scale == 2, ///
	fe vce(cluster pid)
estimates store Neutral

xtreg i_ext_giving log_price log_pinc_all i.year ///
	if year >= 2012 & welfare_level_3scale == 3, ///
	fe vce(cluster pid)
estimates store High
<</dd_do>>
~~~~

~~~~
<<dd_do: nocom>>
estimates table Low Neutral High, ///
	keep(log_price log_pinc_all) ///
	b(%9.3f) se(%9.3f) p(%9.3f) stats(N r2) ///
	title("Extensive Margin Grouped by Perceived Welfare Level")  ///
	modelwidth(13) varwidth(15)
estimates clear
<</dd_do>>
~~~~

~~~~
<<dd_do: noout>>
* Intensive Margin
xtreg log_total_g log_price log_pinc_all i.year ///
	if year >= 2012 & welfare_level_3scale == 1 & i_ext_giving == 1, ///
	fe vce(cluster pid)
estimates store Low

xtreg log_total_g log_price log_pinc_all i.year ///
	if year >= 2012 & welfare_level_3scale == 2 & i_ext_giving == 1, ///
	fe vce(cluster pid)
estimates store Neutral

xtreg log_total_g log_price log_pinc_all i.year ///
	if year >= 2012 & welfare_level_3scale == 3 & i_ext_giving == 1, ///
	fe vce(cluster pid)
estimates store High
<</dd_do>>
~~~~

~~~~
<<dd_do: nocom>>
estimates table Low Neutral High, ///
	keep(log_price log_pinc_all) ///
	b(%9.3f) se(%9.3f) p(%9.3f) stats(N r2) ///
	title("Intensive Margin Grouped by Perceived Welfare Level")  ///
	modelwidth(15) varwidth(15)
estimates clear
<</dd_do>>
~~~~

### 主観的福祉水準に関する寄付価格の異質性（交差項モデル）

価格弾力性が福祉水準によって異なっているので、
これが有意な差かどうかを交差項モデルにて確認した。
各カラムのラベルは以下の要素をコントロールしていることを意味している

- `twoFE`: Two-way fixed effect model
- `Add_Age`: Two-way fixed effect model + 年齢
- `Add_EducT`: Two-way fixed effect model + 年齢 + 教育年数・時間ペアのダミー
- `Add_GenderT`: Two-way fixed effect model + 年齢 + 教育年数・時間ペアのダミー + 性別・時間ペアのダミー
- `Add_LivingT`: Two-way fixed effect model + 年齢 + 教育年数・時間ペアのダミー + 性別・時間ペアのダミー + 居住地・時間ペアのダミー

~~~~
<<dd_do: noout>>
* Intensive + Extensive margin
xtreg log_total_g i.welfare_level_3scale##c.log_price log_pinc_all i.year ///
	if year >= 2012, ///
	fe vce(cluster pid)
estimates store twoFE

xtreg log_total_g i.welfare_level_3scale##c.log_price log_pinc_all age i.year ///
	if year >= 2012, ///
	fe vce(cluster pid)
estimates store Add_Age
	
xtreg log_total_g i.welfare_level_3scale##c.log_price log_pinc_all age i.year##i.educ ///
	if year >= 2012, ///
	fe vce(cluster pid)
estimates store Add_EducT
	
xtreg log_total_g i.welfare_level_3scale##c.log_price log_pinc_all age i.year##i.gender i.year##i.educ ///
	if year >= 2012, ///
	fe vce(cluster pid)
estimates store Add_GenderT
	
xtreg log_total_g i.welfare_level_3scale##c.log_price log_pinc_all age i.year##i.gender i.year##i.educ i.year##i.living_area ///
	if year >= 2012, ///
	fe vce(cluster pid)
estimates store Add_LivingT
<</dd_do>>
~~~~

~~~~
<<dd_do: nocom>>
estimates table twoFE Add_Age Add_EducT Add_GenderT Add_LivingT, ///
	keep(log_price welfare_level_3scale#c.log_price log_pinc_all) ///
	b(%9.3f) se(%9.3f) p(%9.3f) stats(N r2) ///
	title("Heterogenous Effect of Logged Price: Intensive + Extensive Margin")  ///
	modelwidth(12) varwidth(20)
estimates clear
<</dd_do>>
~~~~

~~~~
<<dd_do: noout>>
* Extensive margin
xtreg i_ext_giving i.welfare_level_3scale##c.log_price log_pinc_all i.year ///
	if year >= 2012, ///
	fe vce(cluster pid)
estimates store twoFE

xtreg i_ext_giving i.welfare_level_3scale##c.log_price log_pinc_all age i.year ///
	if year >= 2012, ///
	fe vce(cluster pid)
estimates store Add_Age
	
xtreg i_ext_giving i.welfare_level_3scale##c.log_price log_pinc_all age i.year##i.educ ///
	if year >= 2012, ///
	fe vce(cluster pid)
estimates store Add_EducT
	
xtreg i_ext_giving i.welfare_level_3scale##c.log_price log_pinc_all age i.year##i.gender i.year##i.educ ///
	if year >= 2012, ///
	fe vce(cluster pid)
estimates store Add_GenderT
	
xtreg i_ext_giving i.welfare_level_3scale##c.log_price log_pinc_all age i.year##i.gender i.year##i.educ i.year##i.living_area ///
	if year >= 2012, ///
	fe vce(cluster pid)
estimates store Add_LivingT
<</dd_do>>
~~~~

~~~~
<<dd_do: nocom>>
estimates table twoFE Add_Age Add_EducT Add_GenderT Add_LivingT, ///
	keep(log_price welfare_level_3scale#c.log_price log_pinc_all) ///
	b(%9.3f) se(%9.3f) p(%9.3f) stats(N r2) ///
	title("Heterogenous Effect of Logged Price: Extensive Margin")  ///
	modelwidth(12) varwidth(20)
estimates clear
<</dd_do>>
~~~~

~~~~
<<dd_do: noout>>
* Intensive margin
xtreg log_total_g i.welfare_level_3scale##c.log_price log_pinc_all i.year ///
	if year >= 2012 & i_ext_giving == 1, ///
	fe vce(cluster pid)
estimates store twoFE

xtreg log_total_g i.welfare_level_3scale##c.log_price log_pinc_all age i.year ///
	if year >= 2012 & i_ext_giving == 1, ///
	fe vce(cluster pid)
estimates store Add_Age
	
xtreg log_total_g i.welfare_level_3scale##c.log_price log_pinc_all age i.year##i.educ ///
	if year >= 2012 & i_ext_giving == 1, ///
	fe vce(cluster pid)
estimates store Add_EducT
	
xtreg log_total_g i.welfare_level_3scale##c.log_price log_pinc_all age i.year##i.gender i.year##i.educ ///
	if year >= 2012 & i_ext_giving == 1, ///
	fe vce(cluster pid)
estimates store Add_GenderT
	
xtreg log_total_g i.welfare_level_3scale##c.log_price log_pinc_all age i.year##i.gender i.year##i.educ i.year##i.living_area ///
	if year >= 2012 & i_ext_giving == 1, ///
	fe vce(cluster pid)
estimates store Add_LivingT
<</dd_do>>
~~~~

~~~~
<<dd_do: nocom>>
estimates table twoFE Add_Age Add_EducT Add_GenderT Add_LivingT, ///
	keep(log_price welfare_level#c.log_price log_pinc_all) ///
	b(%9.3f) se(%9.3f) p(%9.3f) stats(N r2) ///
	title("Heterogenous Effect of Logged Price: Intensive Margin")  ///
	modelwidth(12) varwidth(20)
estimates clear
<</dd_do>>
~~~~